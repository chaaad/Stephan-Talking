$StepanTalking={sample_resolution:12e3,phonemes:{A:{f:[10,55,0],w:[10,10,0],dur:3,vol:6,osc:0,plo:0},a:{f:[20,35,0],w:[10,10,0],dur:4,vol:12,osc:0,plo:0},b:{f:[4,0,0],w:[10,0,0],dur:1,vol:1,osc:0,plo:0},c:{f:[35,0,0],w:[15,0,0],dur:4,vol:2,osc:1,plo:0},d:{f:[4,40,80],w:[10,10,10],dur:1,vol:2,osc:0,plo:0},E:{f:[5,56,0],w:[10,10,0],dur:3,vol:3,osc:0,plo:0},e:{f:[14,50,0],w:[10,10,0],dur:3,vol:10,osc:0,plo:0},f:{f:[8,20,34],w:[10,10,10],dur:3,vol:3,osc:1,plo:0},g:{f:[2,10,26],w:[15,5,2],dur:2,vol:1,osc:0,plo:0},h:{f:[22,26,32],w:[30,10,30],dur:1,vol:5,osc:1,plo:0},I:{dur:3.5,arr:[{k:"a",dur:2},{},{k:"E",dur:1}]},i:{f:[5,56,0],w:[10,10,0],dur:2,vol:2,osc:0,plo:0},j:{f:[5,56,0],w:[10,10,0],dur:1,vol:5,osc:0,plo:0},k:{f:[20,80,0],w:[10,10,0],dur:1,vol:2,osc:1,plo:1},l:{f:[8,20,0],w:[10,10,0],dur:3,vol:5,osc:0,plo:0},m:{f:[4,20,0],w:[10,10,0],dur:3,vol:2,osc:0,plo:0},n:{f:[4,40,0],w:[10,10,0],dur:3,vol:2,osc:0,plo:0},O:{f:[12,15,0],w:[10,10,0],dur:3,vol:6,osc:0,plo:0},o:{f:[19,33,0],w:[10,10,0],dur:3,vol:12,osc:0,plo:0},p:{f:[4,10,20],w:[5,10,10],dur:1,vol:2,osc:1,plo:1},r:{f:[3,10,20],w:[30,8,1],dur:4,vol:5,osc:0,plo:0},s:{f:[80,110,0],w:[80,40,0],dur:3,vol:5,osc:1,plo:0},t:{f:[4,20,40],w:[10,20,5],dur:1,vol:3,osc:1,plo:1},U:{f:[5,14,0],w:[10,10,0],dur:3,vol:2,osc:0,plo:0},u:{f:[18,30,0],w:[10,10,0],dur:3,vol:12,osc:0,plo:0},v:{f:[2,20,0],w:[20,10,0],dur:3,vol:3,osc:0,plo:0},w:{f:[3,14,0],w:[10,10,0],dur:3,vol:2,osc:0,plo:0},y:{f:[5,56,0],w:[10,10,0],dur:3,vol:4,osc:0,plo:0},z:{f:[5,28,80],w:[10,5,10],dur:4,vol:5,osc:0,plo:0}},PI_2:2*Math.PI,space_ltrs:" ..\n",quarter_spc_ltr:"_",eighth_spc_ltr:"-",audio_el:new Audio,speaking_flag:false,speak:function(e){function H(e){function i(){function t(e,t){return F(e,t,-t)}function r(e){return.5-(e-Math.floor(e/$ST.PI_2)*$ST.PI_2)/$ST.PI_2}if(A){k*=1.5;A=false}if(e.d)k=F(k+e.d,1,100);w=parseInt(k*d);T=n;if(e.p)T+=e.p;for(y=0;y<3;y++){if(!l.f[y])continue;x=l.f[y]*c;m=0;g=0;N=1-l.w[y]*h;v=a;S=0;for(b=0;b<w;b++){if(!l.osc){E=r(b*(T*$ST.PI_2/$ST.sample_resolution));S=0}else{E=Math.random()-.5}if(e.v)E*=e.v;E=E+2*Math.cos($ST.PI_2*x)*m*N-g*N*N;g=m;m=E;E=.75*S+E*L*p;S=E;E*=t(Math.sin(Math.PI*b/w)*5,1)*10;_[v++]=_[v]/2+E}}a+=w-parseInt(k/3*d);if(l.plo)a+=parseInt(d*2)}if(C=l.arr){for(var t,r=0;t=C[r];r++){if(l=$ST.phonemes[t.k]){L=t.vol||l.vol;k=t.dur||l.dur;i()}else{a+=parseInt(o/2)}}}else{L=l.vol;k=l.dur;i()}}function B(e,t,n){var r={RIFF:{chunk_id:[4,"RIFF"],chunk_size:[4,36+n],type:[4,"WAVE"]},fmt:{chunk_id:[4,"fmt "],chunk_size:[4,16],compression:[2,1],channels:[2,1],sample_rate:[4,t],bytes_per_sec:[4,t*2],block_align:[2,2],bits_per_sample:[2,e]},data:{chunk_id:[4,"data"],chunk_size:[4,n],dummy_sample:[4,0]}};var i="",s,o;for(var u in r){for(s in r[u]){o=r[u][s][1];if(typeof o=="string"){i+=r[u][s][1]}else{i+=String.fromCharCode(o&255,o>>8&255);if(r[u][s][0]==4)i+=String.fromCharCode(o>>16&255,o>>24&255)}}}return i}function j(e,t,n,r){if(t)return F(t,n,r);else return e}function F(e,t,n){e=e*1;if(isNaN(e)||e>n)e=n;else if(e<t)e=t;return e}if(!e||$ST.speaking_flag)return;if(typeof e=="string")e={i:e};if(!e.i)return;$ST.speaking_flag=true;var t=e.i,n=j(95,e.p,50,450),r=j(.685,e.c,.3,1),i=j(.72,e.v,.3,1),s=typeof t=="string",o=parseInt(Math.floor(this.sample_resolution*r*.33)),u,a=0,f,l,c=50/$ST.sample_resolution,h=Math.PI*10/$ST.sample_resolution,p=parseInt(44100/$ST.sample_resolution)*parseInt(44100/$ST.sample_resolution),d=parseInt($ST.sample_resolution/17*r),v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;if(s)t+=" ";else t.push({k:" "});var O=t.length;if(s){u=Math.ceil($ST.sample_resolution/2*r)*O}else{u=0;for(var M=0;M<O;M++){f=t[M].k;if(l=$ST.phonemes[f]){if(k=t[M].d)u+=F(l.dur+k,1,100);else u+=l.dur}else if($ST.space_ltrs.indexOf(f)>=0){u+=t[M].d||1}else if(f==$ST.quarter_spc_ltr){u+=.25}else if(f==$ST.eighth_spc_ltr){u+=.125}}u=Math.ceil($ST.sample_resolution*r*u/4)}u+=u%2;var _=window.ArrayBuffer?new Int16Array(new ArrayBuffer(u)):new Array(u);A=true;for(var M=0;M<O;M++){f=s?t[M]:t[M].k;if(l=$ST.phonemes[f]){H(t[M])}else if($ST.space_ltrs.indexOf(f)>=0){a+=o*(t[M].d||1);A=true}else if(f==$ST.quarter_spc_ltr){a+=parseInt(o/4)}else if(f==$ST.eighth_spc_ltr){a+=parseInt(o/8)}}var D=B(16,$ST.sample_resolution,a*2+2),P="",E;for(M=0;M<a;M++){E=_[M];P+=String.fromCharCode(E&255,E>>8&255)}$ST.audio_el.src="data:audio/wav;base64,"+btoa(D+P);$ST.audio_el.volume=i;$ST.audio_el.play();$ST.speaking_flag=false}};$ST=$StepanTalking